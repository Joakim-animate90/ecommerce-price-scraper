# E-Commerce Price Scraper - Environment Configuration
# Copy this file to .env and update with your actual values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database Settings
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=ecommerce_scraper
POSTGRES_USER=scraper_user
POSTGRES_PASSWORD=change_this_secure_password_123!

# Database Connection Pool Settings
POSTGRES_MIN_POOL_SIZE=1
POSTGRES_MAX_POOL_SIZE=10
POSTGRES_POOL_TIMEOUT=30

# =============================================================================
# REDIS CONFIGURATION (for caching and session storage)
# =============================================================================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# =============================================================================
# SCRAPY CONFIGURATION
# =============================================================================

# Environment Mode (development, testing, production)
SCRAPY_ENV=production

# Logging Configuration
LOG_LEVEL=INFO
LOG_FILE=/app/logs/scrapy.log

# Scraping Performance Settings
CONCURRENT_REQUESTS=16
DOWNLOAD_DELAY=2.5
AUTOTHROTTLE_ENABLED=true
AUTOTHROTTLE_TARGET_CONCURRENCY=2.0

# User Agent Rotation
USER_AGENT_ROTATION=true

# Request Retry Settings
RETRY_TIMES=3
RETRY_HTTP_CODES=500,502,503,504,408,429,403

# =============================================================================
# SUPERSET CONFIGURATION
# =============================================================================

# Superset Security
SUPERSET_SECRET_KEY=change_this_to_a_very_secure_random_string_for_production_use
SUPERSET_ENV=production
SUPERSET_LOAD_EXAMPLES=false

# Superset Admin User
SUPERSET_ADMIN_USERNAME=admin
SUPERSET_ADMIN_PASSWORD=change_this_admin_password
SUPERSET_ADMIN_EMAIL=admin@example.com
SUPERSET_ADMIN_FIRSTNAME=Admin
SUPERSET_ADMIN_LASTNAME=User

# Superset Web Server
SUPERSET_WEBSERVER_PORT=8088
SUPERSET_WEBSERVER_ADDRESS=0.0.0.0
SUPERSET_WORKERS=4

# =============================================================================
# EMAIL CONFIGURATION (for alerts and notifications)
# =============================================================================

# SMTP Settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here
SMTP_MAIL_FROM=ecommerce-scraper@yourdomain.com
SMTP_STARTTLS=true
SMTP_SSL=false

# Email Recipients for Alerts
ALERT_EMAIL_RECIPIENTS=admin@yourdomain.com,ops@yourdomain.com

# =============================================================================
# SCHEDULER CONFIGURATION
# =============================================================================

# Scheduler Settings
MAX_CONCURRENT_SPIDERS=2
MAX_SPIDER_RETRIES=3
SCHEDULER_LOG_LEVEL=INFO

# Spider Timeout Settings (in seconds)
JUMIA_TIMEOUT=1800
MASOKO_TIMEOUT=1800
PHONEPLACE_TIMEOUT=1200
LAPTOPCLINIC_TIMEOUT=1200

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Prometheus Configuration
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_TIME=200h

# Grafana Configuration
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=admin_password_here
GRAFANA_ALLOW_SIGN_UP=false

# Health Check Settings
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# SSL/TLS Settings
SSL_ENABLED=false
SSL_CERT_PATH=/app/ssl/cert.pem
SSL_KEY_PATH=/app/ssl/key.pem

# CORS Settings
CORS_ENABLED=true
CORS_ORIGINS=*

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Database Backup Settings
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *
BACKUP_COMPRESSION=gzip

# S3 Backup Settings (optional)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=
AWS_S3_REGION=us-east-1

# =============================================================================
# PROXY CONFIGURATION (optional)
# =============================================================================

# HTTP Proxy Settings
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1

# Proxy Pool for Scraping (comma-separated list)
PROXY_LIST=

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Memory Settings
MEMORY_LIMIT_MB=2048
MEMORY_WARNING_MB=1024

# Disk Space Monitoring
DISK_SPACE_WARNING_THRESHOLD=10

# Cache Settings
CACHE_ENABLED=true
CACHE_TTL=3600

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Enable development features (only for development environment)
DEBUG=false
TESTING=false
DEVELOPMENT_MODE=false

# Development Database (if different from production)
DEV_POSTGRES_HOST=localhost
DEV_POSTGRES_PORT=5432
DEV_POSTGRES_DB=ecommerce_scraper_dev
DEV_POSTGRES_USER=dev_user
DEV_POSTGRES_PASSWORD=dev_password

# =============================================================================
# API CONFIGURATION (if REST API is enabled)
# =============================================================================

# API Settings
API_ENABLED=false
API_PORT=8000
API_HOST=0.0.0.0
API_WORKERS=4

# API Authentication
API_SECRET_KEY=your_api_secret_key_here
API_ACCESS_TOKEN_EXPIRE_MINUTES=60

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# Webhook URLs for notifications
SLACK_WEBHOOK_URL=
DISCORD_WEBHOOK_URL=
TEAMS_WEBHOOK_URL=

# External APIs
CURRENCY_API_KEY=
EXCHANGE_RATE_API_KEY=

# =============================================================================
# CONTAINER SPECIFIC SETTINGS
# =============================================================================

# Docker Configuration
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# Container Registry
CONTAINER_REGISTRY=ghcr.io
IMAGE_TAG=latest

# =============================================================================
# TIMEZONE AND LOCALIZATION
# =============================================================================

# System Timezone
TZ=Africa/Nairobi

# Locale Settings
LANG=en_US.UTF-8
LC_ALL=en_US.UTF-8

# Currency and Number Formatting
DEFAULT_CURRENCY=KES
CURRENCY_SYMBOL=KSh
DECIMAL_PLACES=2

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable specific features
ENABLE_PRICE_ALERTS=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_PRICE_HISTORY=true
ENABLE_PRODUCT_IMAGES=true
ENABLE_SPECS_EXTRACTION=true
ENABLE_DUPLICATE_DETECTION=true

# Spider-specific feature flags
ENABLE_JUMIA_SPIDER=true
ENABLE_MASOKO_SPIDER=true
ENABLE_PHONEPLACE_SPIDER=true
ENABLE_LAPTOPCLINIC_SPIDER=true

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Custom User Agents (pipe-separated list)
CUSTOM_USER_AGENTS=

# Custom Headers (JSON format)
CUSTOM_HEADERS={}

# JavaScript Execution Settings
JAVASCRIPT_ENABLED=true
PLAYWRIGHT_TIMEOUT=30000
PLAYWRIGHT_NAVIGATION_TIMEOUT=30000

# Data Validation Settings
STRICT_VALIDATION=false
PRICE_MIN_THRESHOLD=15000
PRICE_MAX_THRESHOLD=500000

# =============================================================================
# EXPERIMENTAL FEATURES
# =============================================================================

# These features are experimental and may not be stable
ENABLE_ML_PRICE_PREDICTION=false
ENABLE_SENTIMENT_ANALYSIS=false
ENABLE_IMAGE_RECOGNITION=false
ENABLE_REAL_TIME_ALERTS=false

# =============================================================================
# NOTES AND INSTRUCTIONS
# =============================================================================

# 1. Replace all example passwords and secret keys with strong, unique values
# 2. For production, ensure SCRAPY_ENV is set to 'production'
# 3. Configure proper SMTP settings for email notifications
# 4. Set up proper SSL certificates if SSL_ENABLED=true
# 5. Review and adjust performance settings based on your server capacity
# 6. Enable only the spiders and features you need
# 7. Configure backup settings if you want automated backups
# 8. Set up monitoring if you want observability features

# Security Recommendations:
# - Use strong passwords (at least 16 characters with mixed case, numbers, symbols)
# - Generate random secret keys (use: openssl rand -hex 32)
# - Enable SSL in production
# - Regularly rotate passwords and keys
# - Use environment-specific configurations
# - Never commit real credentials to version control
